import{r as n,j as i,b as t,B as b,a as f,p as k,q as N,y as S,z as w}from"./index-01d10353.js";import{I as x}from"./IconCopy-2982012a.js";const M=d=>{const r=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}],h=[{time:"12:00 AM",value:0},{time:"1:00 AM",value:1},{time:"2:00 AM",value:2},{time:"3:00 AM",value:3},{time:"4:00 AM",value:4},{time:"5:00 AM",value:5},{time:"6:00 AM",value:6},{time:"7:00 AM",value:7},{time:"8:00 AM",value:8},{time:"9:00 AM",value:9},{time:"10:00 AM",value:10},{time:"11:00 AM",value:11},{time:"12:00 PM",value:12},{time:"1:00 PM",value:13},{time:"2:00 PM",value:14},{time:"3:00 PM",value:15},{time:"4:00 PM",value:16},{time:"5:00 PM",value:17},{time:"6:00 PM",value:18},{time:"7:00 PM",value:19},{time:"8:00 PM",value:20},{time:"9:00 PM",value:21},{time:"10:00 PM",value:22},{time:"11:00 PM",value:23}],[l,m]=n.useState(d.workingTime||{monday:{from:8,to:17},tuesday:{from:8,to:17},wednesday:{from:8,to:17},thursday:{from:8,to:17},friday:{from:8,to:17},saturday:{from:8,to:17},sunday:{from:8,to:17}}),[s,c]=n.useState(!1),v=e=>{const{name:a,value:o}=e.target,[p,y]=a.split("-");m(g=>({...g,[p]:{...g[p],[y]:Number(o)}}))},u=()=>{s||(c(!0),f.post("/company/settings/book-appointment/working-time",{workingTime:JSON.stringify(l)}).then(e=>{console.log(e.data)}).catch(e=>{console.log(e)}).finally(()=>{c(!1)}))};return i("div",{className:"panel p-4",children:[t("div",{className:"mt-1 text-center font-bold text-lg mb-4",children:"Working time"}),i("div",{className:"grid grid-flow-row gap-3",children:[r.map((e,a)=>i("div",{className:"grid grid-cols-3 gap-3",children:[t("label",{htmlFor:e.value,children:e.label}),t("select",{id:e.value,value:l[e.value].from,name:e.value+"-from",className:"form-select text-white-dark",onChange:v,children:h.map((o,p)=>t("option",{value:o.value,children:o.time},p))}),t("select",{id:e.value,value:l[e.value].to,name:e.value+"-to",className:"form-select text-white-dark",onChange:v,children:h.map((o,p)=>t("option",{value:o.value,children:o.time},p))})]},a)),t("div",{className:"mt-4 w-full",children:i("button",{className:"btn btn-primary w-full",onClick:u,children:["Save ",s&&t(b,{})]})})]})]})},C=d=>{const[r,h]=n.useState(d.settings),l=n.useRef(null),[m,s]=n.useState(!1),c=()=>{var u,e;(u=l.current)==null||u.select(),navigator.clipboard&&navigator.clipboard.writeText(((e=l.current)==null?void 0:e.value)||"").then(()=>{k("Link copied successfully"),console.log("copied")}).catch(a=>{N("Failed to copy link"),console.log(a)})},v=u=>{s(!0),f.post("/company/settings/book-appointment/update",{active:u.target.checked}).then(e=>{console.log(e.data),h({...r,active:e.data.active})}).catch(e=>{console.log(e)}).finally(()=>{s(!1)})};return t("div",{className:"panel p-4",children:i("div",{className:"mb-5",children:[t("div",{className:"mb-4",children:r.active?t("p",{className:"text-green-500",children:"Book appointment online is active"}):t("p",{className:"text-red-500",children:"Book appointment online is inactive"})}),i("div",{className:"flex items-center",children:[i("div",{className:"flex items-center",children:[i("label",{className:"w-12 h-6 relative mt-2",children:[t("input",{type:"checkbox",className:"custom_switch absolute w-full h-full opacity-0 z-10 cursor-pointer peer",id:"custom_switch_checkbox1",checked:r.active,onChange:v}),t("span",{className:"bg-[#ebedf2] dark:bg-dark block h-full rounded-full before:absolute before:left-1 before:bg-white dark:before:bg-white-dark dark:peer-checked:before:bg-white before:bottom-1 before:w-4 before:h-4 before:rounded-full peer-checked:before:left-7 peer-checked:bg-primary before:transition-all before:duration-300"})]}),m&&t("div",{className:"w-5 h-5 ml-2",children:t(b,{})})]}),i("div",{className:"flex w-full ml-10",children:[t("input",{disabled:!r.active,ref:l,readOnly:!0,id:"addonsRight",type:"text",placeholder:"",className:"form-input ltr:rounded-r-none rtl:rounded-l-none",value:window.location.origin+"/appointment/book/"+r.key}),t("button",{type:"button",className:"btn btn-secondary ltr:rounded-l-none rtl:rounded-r-none",onClick:c,children:t(x,{})})]})]})]})})},A=d=>{const[r,h]=n.useState(d.loadedCompanyServices||[]),[l,m]=n.useState(d.bookService||[]),[s,c]=n.useState([]),v=e=>{let a=l.map(o=>o.id);a.push(e.id),f.post("/company/settings/book-appointment/update-services",{services:a}).then(o=>{console.log(o.data)}).catch(o=>{c([...s,e]),m(l.filter(p=>p.id!==e.id)),console.log(o)}),c(s.filter(o=>o.id!==e.id)),m([...l,e])},u=e=>{let a=l.map(o=>o.id);a=a.filter(o=>o!==e.id),f.post("/company/settings/book-appointment/update-services",{services:a}).then(o=>{console.log(o.data)}).catch(o=>{m([...l,e]),c(s.filter(p=>p.id!==e.id)),console.log(o)}),m(l.filter(o=>o.id!==e.id)),c([...s,e])};return n.useEffect(()=>{c(r.filter(e=>!l.some(a=>a.id===e.id)))},[]),i("div",{className:"grid grid-cols-2",children:[i("div",{className:"px-2",children:[t("p",{className:"my-2 mb-4",children:"Click to add"}),s.map((e,a)=>i("div",{className:"flex justify-between p-2 bg-slate-950 mt-2 rounded cursor-pointer",onClick:()=>{v(e)},children:[i("div",{children:[t("p",{className:"text-white",children:e.title}),t("p",{children:e.description})]}),t("div",{children:t("p",{className:"text-white",children:e.price})})]},a))]}),i("div",{className:"px-2 border-l dark:border-gray-800",children:[t("p",{className:"my-2 mb-4",children:"Click to remove"}),l.map((e,a)=>i("div",{className:"flex justify-between p-2 bg-slate-950 mt-2 rounded cursor-pointer",onClick:()=>{u(e)},children:[i("div",{children:[t("p",{className:"text-white",children:e.title}),t("p",{children:e.description})]}),t("div",{children:t("p",{className:"text-white",children:e.price})})]},a))]})]})},B=()=>{const[d,r]=n.useState("loading"),[h,l]=n.useState({}),[m,s]=n.useState([]),[c,v]=n.useState([]),[u,e]=n.useState({monday:{from:0,to:0},tuesday:{from:0,to:0},wednesday:{from:0,to:0},thursday:{from:0,to:0},friday:{from:0,to:0},saturday:{from:0,to:0},sunday:{from:0,to:0}});return n.useEffect(()=>{f.get("/company/settings/book-appointment").then(a=>{console.log(a.data),e(JSON.parse(a.data.settings.working_time)),l(a.data.settings),s(a.data.companyServices||[]),v(a.data.bookAppointmentServices||[]),r("success")}).catch(a=>{console.log(a),r("error")})},[]),t("div",{children:i("div",{children:[t("div",{className:"flex justify-start items-center text-lg",children:t("h1",{children:"Book Appointments online settings"})}),d==="loading"&&t(S,{}),d==="error"&&t(w,{}),d==="success"&&t("div",{className:"py-4",children:i("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-5",children:[t(M,{workingTime:u}),i("div",{className:"md:col-span-2",children:[t(C,{settings:h}),t("div",{className:"panel p-2 mt-5 pb-4",children:t(A,{loadedCompanyServices:m,bookService:c})})]})]})})]})})};export{B as default};
