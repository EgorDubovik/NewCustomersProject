import{r,e as j,b as w,a0 as T,j as n,a as e,P as L,c as B,B as I,S as _,M as z}from"./index-41408ffa.js";import{I as A}from"./IconEdit-699625c9.js";import{I as H}from"./IconTrash-a3df4d05.js";import{a as $}from"./Google-9bc867c3.js";const M=()=>{const[s,i]=r.useState([]),c="#9812B7",[b,m]=r.useState("loading"),[x,C]=r.useState(""),[u,h]=r.useState(!1),[S,p]=r.useState(0),[y,g]=r.useState(c),o=j(),[l,f]=r.useState({id:0,title:"",color:c,company_id:0});r.useEffect(()=>{m("loading"),w.get("company/settings/tags").then(t=>{i(t.data),m("success")}).catch(t=>{m("error"),console.log(t)})},[]);const N=()=>{l.id===0?P():D()},v=t=>{const a=s.find(d=>d.id===t);f(a||{id:0,title:"",color:c,company_id:0}),g(a?a.color:c)},k=t=>{g(t),f({...l,color:t})},P=()=>{if(u)return;const t={title:l.title,color:l.color};h(!0),w.post("company/settings/tags",t).then(a=>{let d=[...s,a.data];i(d),C(""),f({...l,title:""}),o(T(d))}).catch(a=>{alert("Something went wrong. Please try again later"),console.log(a)}).finally(()=>{h(!1)})},D=()=>{u||w.put(`company/settings/tags/${l.id}`,l).then(t=>{t.status===200&&i(s.map(a=>a.id===l.id?l:a))}).catch(t=>{alert("Something went wrong. Please try again later"),console.log(t)}).finally(()=>{h(!1),f({id:0,title:"",color:c,company_id:0})})};return{tags:s,loadingStatus:b,tag:l,setTag:f,saveTagHandle:N,selectedColor:y,setSelectedColor:g,storeStatus:u,deleteStatus:S,handelEditTag:v,handleDeleteTag:t=>{p(t),w.delete(`company/settings/tags/${t}`).then(a=>{if(a.status===200){let d=s.filter(E=>E.id!==t);i(d),o(T(d))}}).catch(a=>{alert("Something went wrong. Please try again later"),console.log(a)}).finally(()=>{p(0)})},handleColorSelected:k}},K=()=>{const{loadingStatus:s,tag:i,setTag:c,selectedColor:b,storeStatus:m,saveTagHandle:x,handelEditTag:C,deleteStatus:u,handleDeleteTag:h,tags:S,handleColorSelected:p}=M(),[y,g]=r.useState(!1);return n("div",{children:[s==="loading"&&e(L,{}),s==="error"&&e(B,{}),s==="success"&&n("div",{className:"panel md:w-1/2 w-full m-auto",children:[e("h3",{className:"font-semibold text-lg dark:text-white-light",children:"Create or remove company tags"}),n("div",{className:"flex items-center gap-2 mt-4",children:[e("input",{type:"text",value:i.title,onChange:o=>c({...i,title:o.target.value}),className:"form-input w-3/4",placeholder:"Enter tag title"}),n("div",{id:"color",className:"w-1/4 h-10 relative ",children:[e("div",{className:"absolute flex items-center justify-center text-white cursor-pointer rounded-md top-0 left-0 w-full h-full z-10",style:{backgroundColor:b},onClick:()=>g(!y),children:"Choose color"}),y&&n("div",{className:"absolute top-12 left-0 w-full h-full z-20",children:[e("div",{className:"fixed top-0 left-0 right-0 bottom-0",onClick:()=>g(!1)}),e($,{disableAlpha:!0,color:b,onChange:o=>p(o.hex)})]})]}),e("button",{className:"btn btn-primary",onClick:x,children:m?e(I,{}):i.id===0?"Add":"Update"})]}),e("p",{className:"text-[13px] mt-4 text-gray-500 dark:text-gray-400",children:"If you need same color as another tag, please just click on the tag"}),e("div",{className:"inline-flex flex-wrap gap-3 mt-4",children:S.map((o,l)=>n("div",{className:"inline-flex",children:[e("button",{className:"btn btn-sm rounded-r-none border-none text-white shadow-none",style:{backgroundColor:o.color},onClick:()=>p(o.color),children:u===o.id?e(_,{}):o.title}),e("div",{className:"dropdown border-none",children:e(z,{placement:"bottom-start",btnClassName:"btn btn-sm dropdown-toggle rounded-l-none border-0 before:border-[5px] before:border-l-transparent before:border-r-transparent  before:border-b-0 h-full",style:{backgroundColor:o.color},button:e("span",{className:"sr-only",children:"Toggle dropdown"}),children:n("ul",{className:"!min-w-[170px]",children:[e("li",{children:n("button",{type:"button",onClick:()=>C(o.id),children:[e(A,{})," ",e("span",{className:"ml-2",children:"Edit"})]})}),e("li",{children:n("button",{type:"button",onClick:()=>h(o.id),children:[e(H,{})," ",e("span",{className:"ml-2",children:"Delete"})]})})]})})})]},l))})]})]})};export{K as default};
