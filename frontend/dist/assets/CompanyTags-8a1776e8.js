import{r as i,e as j,b as w,a3 as T,j as r,a as e,P as L,c as B,B as I,S as _,T as z}from"./index-c14d3c63.js";import{I as A}from"./IconEdit-69f5483c.js";import{I as H}from"./IconTrash-1570f094.js";import{a as $}from"./Google-f46c356d.js";const U=()=>{const[n,c]=i.useState([]),d="#9812B7",[b,m]=i.useState("loading"),[x,C]=i.useState(""),[u,h]=i.useState(!1),[S,p]=i.useState(0),[y,g]=i.useState(d),a=j(),[l,f]=i.useState({id:0,title:"",color:d,company_id:0});i.useEffect(()=>{m("loading"),w.get("company/settings/tags").then(t=>{c(t.data),m("success")}).catch(t=>{m("error"),console.log(t)})},[]);const N=()=>{l.id===0?P():D()},v=t=>{const o=n.find(s=>s.id===t);f(o||{id:0,title:"",color:d,company_id:0}),g(o?o.color:d)},k=t=>{g(t),f({...l,color:t})},P=()=>{if(u)return;const t={title:l.title,color:l.color};h(!0),w.post("company/settings/tags",t).then(o=>{let s=[...n,o.data];c(s),C(""),f({...l,title:""}),a(T(s))}).catch(o=>{alert("Something went wrong. Please try again later"),console.log(o)}).finally(()=>{h(!1)})},D=()=>{u||w.put(`company/settings/tags/${l.id}`,l).then(t=>{if(t.status===200){let o=n.map(s=>s.id===l.id?l:s);c(o),a(T(o))}}).catch(t=>{alert("Something went wrong. Please try again later"),console.log(t)}).finally(()=>{h(!1),f({id:0,title:"",color:d,company_id:0})})};return{tags:n,loadingStatus:b,tag:l,setTag:f,saveTagHandle:N,selectedColor:y,setSelectedColor:g,storeStatus:u,deleteStatus:S,handelEditTag:v,handleDeleteTag:t=>{p(t),w.delete(`company/settings/tags/${t}`).then(o=>{if(o.status===200){let s=n.filter(E=>E.id!==t);c(s),a(T(s))}}).catch(o=>{alert("Something went wrong. Please try again later"),console.log(o)}).finally(()=>{p(0)})},handleColorSelected:k}},M=()=>{const{loadingStatus:n,tag:c,setTag:d,selectedColor:b,storeStatus:m,saveTagHandle:x,handelEditTag:C,deleteStatus:u,handleDeleteTag:h,tags:S,handleColorSelected:p}=U(),[y,g]=i.useState(!1);return r("div",{children:[n==="loading"&&e(L,{}),n==="error"&&e(B,{}),n==="success"&&r("div",{className:"panel md:w-1/2 w-full m-auto",children:[e("h3",{className:"font-semibold text-lg dark:text-white-light",children:"Create or remove company tags"}),r("div",{className:"flex items-center gap-2 mt-4",children:[e("input",{type:"text",value:c.title,onChange:a=>d({...c,title:a.target.value}),className:"form-input w-3/4",placeholder:"Enter tag title"}),r("div",{id:"color",className:"w-1/4 h-10 relative ",children:[e("div",{className:"absolute flex items-center justify-center text-white cursor-pointer rounded-md top-0 left-0 w-full h-full z-10",style:{backgroundColor:b},onClick:()=>g(!y),children:"Choose color"}),y&&r("div",{className:"absolute top-12 left-0 w-full h-full z-20",children:[e("div",{className:"fixed top-0 left-0 right-0 bottom-0",onClick:()=>g(!1)}),e($,{disableAlpha:!0,color:b,onChange:a=>p(a.hex)})]})]}),e("button",{className:"btn btn-primary",onClick:x,children:m?e(I,{}):c.id===0?"Add":"Update"})]}),e("p",{className:"text-[13px] mt-4 text-gray-500 dark:text-gray-400",children:"If you need same color as another tag, please just click on the tag"}),e("div",{className:"inline-flex flex-wrap gap-3 mt-4",children:S.map((a,l)=>r("div",{className:"inline-flex",children:[e("button",{className:"btn btn-sm rounded-r-none border-none text-white shadow-none",style:{backgroundColor:a.color},onClick:()=>p(a.color),children:u===a.id?e(_,{}):a.title}),e("div",{className:"dropdown border-none",children:e(z,{placement:"bottom-start",btnClassName:"btn btn-sm dropdown-toggle rounded-l-none border-0 before:border-[5px] before:border-l-transparent before:border-r-transparent  before:border-b-0 h-full",style:{backgroundColor:a.color},button:e("span",{className:"sr-only",children:"Toggle dropdown"}),children:r("ul",{className:"!min-w-[170px]",children:[e("li",{children:r("button",{type:"button",onClick:()=>C(a.id),children:[e(A,{})," ",e("span",{className:"ml-2",children:"Edit"})]})}),e("li",{children:r("button",{type:"button",onClick:()=>h(a.id),children:[e(H,{})," ",e("span",{className:"ml-2",children:"Delete"})]})})]})})})]},l))})]})]})};export{M as default};
