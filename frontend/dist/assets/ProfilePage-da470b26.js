import{r as i,j as a,a as e,B as w,b as p,u as N,G as P,a4 as v,y as x,i as f,f as y,P as S,c as U,F as C,a2 as k}from"./index-2d8ba8ea.js";const L=()=>{const[l,n]=i.useState("loading"),[r,d]=i.useState(""),[c,o]=i.useState(!1),[s,m]=i.useState({oldPassword:"",newPassword:"",confirmPassword:""}),g=h=>{m({...s,[h.target.name]:h.target.value})};return a("div",{className:"panel",children:[e("p",{className:"text-base text-center",children:"Update password"}),l==="error"&&e("div",{className:"flex my-2 items-center p-3.5 rounded text-danger bg-danger-light dark:bg-danger-dark-light",children:r}),l==="success"&&e("div",{className:"flex my-2 items-center p-3.5 rounded text-success bg-success-light dark:bg-success-dark-light",children:r}),a("form",{className:"space-y-5",onSubmit:h=>{if(h.preventDefault(),n("loading"),s.newPassword!==s.confirmPassword){n("error"),d("New and Confirm passwords do not match");return}if(s.newPassword.length<4||s.oldPassword.length<4){n("error"),d("Password must be at least 4 characters");return}c||(o(!0),n("loading"),p.post("/user/update-password",s).then(t=>{console.log(t.data),n("success"),d(t.data.message),o(!1),m({oldPassword:"",newPassword:"",confirmPassword:""})}).catch(t=>{console.log(t),n("error"),d(t.response.data.message),o(!1)}))},children:[a("div",{children:[e("label",{htmlFor:"groupFname",children:"Enter old password"}),e("input",{id:"groupFname",type:"password",placeholder:"Old Password",className:"form-input",name:"oldPassword",value:s.oldPassword,onChange:g})]}),a("div",{children:[e("label",{htmlFor:"groupLname",children:"Enter new password"}),e("input",{id:"groupLname",type:"password",placeholder:"New password",className:"form-input",name:"newPassword",value:s.newPassword,onChange:g})]}),a("div",{children:[e("label",{htmlFor:"groupsecond",children:"Confirm new password"}),e("input",{id:"groupsecond",type:"password",placeholder:"Confirm password",className:"form-input",name:"confirmPassword",value:s.confirmPassword,onChange:g})]}),e("div",{className:"flex justify-end",children:a("button",{type:"submit",className:"btn btn-primary",children:["Submit",c&&e(w,{})]})})]})]})},E=l=>{const{user:n}=l,[r,d]=i.useState({}),[c,o]=i.useState(!1),[s,m]=i.useState(n),g=N(),u=(t,b)=>{m({...s,[t]:b})},h=()=>{d({}),!c&&(o(!0),p.put("/user",s).then(t=>{P("User Info Updated"),g(v(s))}).catch(t=>{console.log(t),d(t.response.data.errors)}).finally(()=>{o(!1)}))};return i.useEffect(()=>{console.log(r)},[r]),a("div",{className:"panel",children:[e("h3",{className:"text-lg font-semibold",children:"Update personal information"}),Object.keys(r).map((t,b)=>e("div",{className:"flex mb-2 items-center p-3.5 rounded text-danger bg-danger-light dark:bg-danger-dark-light",children:e("span",{className:"ltr:pr-2 rtl:pl-2",children:r[t]})})),a("div",{className:"mt-3",children:[a("div",{className:"mt-4",children:[e("label",{children:"User Name"}),e("input",{value:s.name??"",type:"text",className:"form-input",placeholder:"User Name",onChange:t=>u("name",t.target.value)})]}),a("div",{className:"mt-4",children:[e("label",{children:"User Email"}),e("input",{value:s.email??"",type:"text",className:"form-input",placeholder:"User Email",onChange:t=>u("email",t.target.value)})]}),a("div",{className:"mt-4",children:[e("label",{children:"User Phone"}),e("input",{value:s.phone??"",type:"text",className:"form-input",placeholder:"User Phone",onChange:t=>u("phone",t.target.value)})]}),e("div",{className:"mt-6",children:a("button",{className:"btn btn-primary w-full",onClick:h,children:["Update User Inforation",c&&e(w,{})]})})]})]})},F=({user:l})=>{var o;const n=N(),[r,d]=i.useState(!1),c=s=>{d(!0),p.post("/user-settings",{timePickerLineLength:s}).then(m=>{n(v({settings:{...l.settings,timePickerLineLength:s}})),P("Time picker line length updated successfully")}).catch(m=>{console.log(m),x("Something went wrong, please try again later")}).finally(()=>{d(!1)})};return a("div",{className:"panel",children:[a("h2",{className:"text-lg",children:["User Settings",r&&e(w,{})]}),e("div",{className:"table w-full",children:e("table",{className:"table",style:{width:"100%"},children:e("tbody",{children:a("tr",{children:[e("td",{width:"50%",children:"Time picker line length"}),e("td",{width:"50%",children:e("select",{className:"form-select text-white-dark",value:((o=l==null?void 0:l.settings)==null?void 0:o.timePickerLineLength)||3,onChange:s=>c(parseInt(s.target.value)),children:[3,5,7,9,11,13].map(s=>e("option",{value:s,children:s},s))})})]})})})})]})},I=()=>{const[l,n]=i.useState("loading"),r=f(s=>s.themeConfig.user),d=f(s=>s.themeConfig.rolesTitle),c=f(s=>s.themeConfig.rolesColor),o=N();return i.useEffect(()=>{o(y("User Profile"))},[o]),i.useEffect(()=>{n("loading"),p.get("/user").then(s=>{o(v(s.data.user)),n("success")}).catch(s=>{n("error")})},[]),a("div",{children:[e("div",{className:"flex items-center justify-between flex-wrap gap-4",children:e("h2",{className:"text-lg",children:"Profile information"})}),l==="loading"&&e(S,{}),l==="error"&&e(U,{}),l==="success"&&e(C,{children:a("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 py-4",children:[a("div",{className:"grid grid-rows-none gap-3",children:[a("div",{className:"panel",children:[a("div",{className:"flex items-center justify-center",children:[e("div",{className:"w-20 h-20 rounded-full bg-gray-200 dark:bg-gray-800 flex items-center justify-center text-2xl text-gray-300",style:{backgroundColor:r.color??"#ccc"},children:k(r.name)}),a("div",{className:"ml-5",children:[e("h5",{className:"font-semibold text-lg dark:text-white",children:r.name}),e("p",{children:r.phone}),e("p",{children:r.email})]})]}),e("div",{className:"mt-5 flex flex-wrap items-center justify-center gap-3",children:r.roles_ids.map((s,m)=>e("span",{className:"badge badge-outline-"+(c[s]??"primary"),children:d[s]??"unknown"},m))})]}),e(L,{})]}),e("div",{className:"grid grid-rows-none gap-3",children:e(E,{user:r})}),e("div",{className:"grid grid-rows-none gap-3",children:e(F,{user:r})})]})})]})};export{I as default};
