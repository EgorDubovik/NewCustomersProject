import{r,a as f,j as i,b as e,z as $,A as L,B as j,S as I,aj as O}from"./index-802210ca.js";import{I as _}from"./IconEdit-d344775d.js";import{I as A}from"./IconTrash-5a5c2f86.js";const B=()=>{const[s,l]=r.useState([]),[y,c]=r.useState("loading"),[T,w]=r.useState(""),[m,g]=r.useState(!1),[S,u]=r.useState(0),[n,d]=r.useState({id:0,title:"",color:"primary",company_id:0});r.useEffect(()=>{c("loading"),f.get("company/settings/tags").then(t=>{l(t.data),c("success")}).catch(t=>{c("error"),console.log(t)})},[]);const[p,h]=r.useState(!1),[a,b]=r.useState("primary"),N=["primary","secondary","success","danger","warning","info","dark"],v=()=>{h(!p)},x=t=>{d({...n,color:t}),h(!1)},k=()=>{n.id===0?E():P()},D=t=>{const o=s.find(C=>C.id===t);d(o||{id:0,title:"",color:"primary",company_id:0})},E=()=>{if(m)return;const t={title:n.title,color:n.color};g(!0),f.post("company/settings/tags",t).then(o=>{l([...s,o.data]),w("")}).catch(o=>{alert("Something went wrong. Please try again later"),console.log(o)}).finally(()=>{g(!1)})},P=()=>{m||f.put(`company/settings/tags/${n.id}`,n).then(t=>{t.status===200&&l(s.map(o=>o.id===n.id?n:o))}).catch(t=>{alert("Something went wrong. Please try again later"),console.log(t)}).finally(()=>{g(!1),d({id:0,title:"",color:"primary",company_id:0})})};return{tags:s,loadingStatus:y,tag:n,setTag:d,saveTagHandle:k,isDropdownOpen:p,handleColorClick:v,colors:N,selectColor:x,selectedColor:a,storeStatus:m,deleteStatus:S,handelEditTag:D,handleDeleteTag:t=>{u(t),f.delete(`company/settings/tags/${t}`).then(o=>{console.log(o),o.status===200&&l(s.filter(C=>C.id!==t))}).catch(o=>{alert("Something went wrong. Please try again later"),console.log(o)}).finally(()=>{u(0)})}}},F=()=>{const{loadingStatus:s,tag:l,setTag:y,selectColor:c,selectedColor:T,isDropdownOpen:w,colors:m,storeStatus:g,saveTagHandle:S,handelEditTag:u,handleColorClick:n,deleteStatus:d,handleDeleteTag:p,tags:h}=B();return i("div",{children:[s==="loading"&&e($,{}),s==="error"&&e(L,{}),s==="success"&&i("div",{className:"panel md:w-1/2 w-full m-auto",children:[e("h3",{className:"font-semibold text-lg dark:text-white-light",children:"Create or remove company tags"}),i("div",{className:"flex items-center gap-2",children:[e("input",{type:"text",value:l.title,onChange:a=>y({...l,title:a.target.value}),className:"form-input w-3/4",placeholder:"Enter tag title"}),e("div",{id:"color",className:`w-1/4 bg-${l.color} h-10 rounded cursor-pointer relative`,onClick:n,children:w&&e("div",{className:"absolute w-full top-8 shadow-lg mt-2 rounded",children:m.map((a,b)=>l.color!==a&&e("div",{className:`p-2 mt-2 cursor-pointer bg-${a} h-10 rounded`,onClick:()=>c(a)},b))})}),e("button",{className:"btn btn-primary",onClick:S,children:g?e(j,{}):l.id===0?"Add":"Update"})]}),e("div",{className:"mt-4",children:h.map((a,b)=>i("div",{className:"inline-flex ml-4 mb-2",children:[e("button",{className:`btn btn-sm btn-${a.color} ltr:rounded-r-none rtl:rounded-l-none`,children:d===a.id?e(I,{}):a.title}),e("div",{className:"dropdown",children:e(O,{placement:"bottom-start",btnClassName:`btn btn-sm dropdown-toggle btn-${a.color} ltr:rounded-l-none rtl:rounded-r-none before:border-[5px] before:border-l-transparent before:border-r-transparent before:border-t-inherit before:border-b-0 before:inline-block before:border-t-white-light h-full`,button:e("span",{className:"sr-only",children:"Toggle dropdown"}),children:i("ul",{className:"!min-w-[170px]",children:[e("li",{children:i("button",{type:"button",onClick:()=>u(a.id),children:[e(_,{})," ",e("span",{className:"ml-2",children:"Edit"})]})}),e("li",{children:i("button",{type:"button",onClick:()=>p(a.id),children:[e(A,{})," ",e("span",{className:"ml-2",children:"Delete"})]})})]})})})]},b))})]})]})};export{F as default};
