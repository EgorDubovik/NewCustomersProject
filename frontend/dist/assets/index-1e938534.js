import{r as n,b as I,C as _,j as r,a as e,af as A,ai as M,P as j,c as L,F as T,Q as $,m as Q,B as D,t as k,_ as R}from"./index-91d59c4a.js";import{I as Y}from"./IconX-a6bf1b45.js";const z=()=>{const[w,u]=n.useState("loading"),[d,h]=n.useState(!1),[F,i]=n.useState(!1),[l,o]=n.useState([]),[c,b]=n.useState({id:0,title:"",quantity:0,expexted_quantity:0}),[x,v]=n.useState(0);n.useEffect(()=>{u("loading"),I.get("/storage").then(a=>{console.log("data:",a.data),o(a.data.storageItems),u("success")}).catch(a=>{u("error"),console.log(a)})},[]);const y=()=>{d||(c.id!==0?N(c.id):(h(!0),I.post("/storage",c).then(a=>{a.status===200&&i(!1);let s=[...l];s.unshift(a.data.storageItem),o(s)}).catch(a=>{console.log(a)}).finally(()=>{h(!1)})))},N=a=>{d||(h(!0),I.put(`/storage/${a}`,c).then(s=>{s.status===200&&i(!1);const m=l.findIndex(E=>E.id===a),g=[...l];g[m]=s.data.storageItem,o(g)}).catch(s=>{console.log(s)}).finally(()=>{h(!1)}))};return{openModal:a=>{if(a===0)b({id:0,title:"",quantity:0,expexted_quantity:0});else{const s=l.find(m=>m.id===a);b(s)}i(!0)},modal:F,setModal:i,removeItem:a=>{x===0&&(v(a),I.delete(`/storage/${a}`).then(s=>{if(s.status===200){const m=l.filter(g=>g.id!==a);o(m)}}).catch(s=>{console.log(s)}).finally(()=>{v(0)}))},storeItem:y,changeValue:a=>{b({...c,[a.target.name]:a.target.value})},loadingDataForm:d,initialRecords:l,dataForm:c,loadingStatus:w,updateItem:N,removeId:x}},O=()=>{const{openModal:w,modal:u,setModal:d,removeItem:h,storeItem:F,changeValue:i,dataForm:l,initialRecords:o,loadingStatus:c,loadingDataForm:b,removeId:x}=z();console.log("removeID:",x);const[v,y]=n.useState([]),N=[10,20,30,50,100],[C,P]=n.useState(1),[p,a]=n.useState(N[0]),[s,m]=n.useState({columnAccessor:"firstName",direction:"asc"}),[g,E]=n.useState(""),q=t=>{const f=(C-1)*p,S=f+p;return t.slice(f,S)};return n.useEffect(()=>{P(1)},[p]),n.useEffect(()=>{const t=q(_(o,s.columnAccessor));y(s.direction==="desc"?t.reverse():t)},[s,o]),n.useEffect(()=>{y(q(o))},[C,p]),r("div",{children:[r("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e("h2",{className:"text-xl",children:"Storage"}),r("div",{className:"flex sm:flex-row flex-col sm:items-center sm:gap-3 gap-4 w-full sm:w-auto",children:[e("div",{className:"flex gap-3",children:e("div",{children:r("button",{type:"button",className:"btn btn-primary",onClick:()=>{w(0)},children:[e(A,{className:"ltr:mr-2 rtl:ml-2"}),"Add Item"]})})}),r("div",{className:"relative",children:[e("input",{type:"text",placeholder:"Search Item",className:"form-input py-2 pr-11 peer",value:g,onChange:t=>{E(t.target.value);const f=o.filter(S=>S.title.toLowerCase().includes(t.target.value.toLowerCase()));y(f)}}),e("button",{type:"button",className:"absolute right-[11px] top-1/2 -translate-y-1/2 peer-focus:text-primary",children:e(M,{className:"mx-auto"})})]})]})]}),c==="loading"&&e(j,{}),c==="error"&&e("div",{className:"mt-4",children:e(L,{})}),c==="success"&&e(T,{children:v.length===0?e("div",{className:"mt-4",children:e("div",{className:"flex items-center justify-center",children:r("div",{className:"text-center",children:[e("h2",{className:"text-xl",children:"No Items Found"}),e("p",{className:"text-gray-500",children:"Add new items to the storage"})]})})}):e("div",{className:"mt-5 panel p-0 border-0 overflow-hidden",children:e("div",{className:"datatables pagination-padding",children:e($,{className:"whitespace-nowrap table-hover invoice-table pb-4",records:v,columns:[{accessor:"ID",sortable:!0,render:({id:t})=>e("span",{children:t})},{accessor:"title",sortable:!0,render:({title:t})=>e("span",{children:t})},{accessor:"quantity",sortable:!0,render:({quantity:t})=>e("span",{children:t})},{accessor:"expexted_quantity",sortable:!0,render:({expexted_quantity:t})=>e("span",{children:t})},{accessor:"updated_at",sortable:!0,render:({updated_at:t})=>e("span",{children:Q(new Date(t),"MMMM DD, YYYY")})},{accessor:"action",title:"Actions",sortable:!1,textAlignment:"center",render:({id:t})=>r("div",{className:"flex gap-4 items-center w-max mx-auto",children:[e("button",{type:"button",className:"btn btn-sm btn-outline-warning",onClick:()=>{w(t)},children:"Edit"}),r("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>{h(t)},children:["Delete ",x===t&&e(D,{})]})]})}],highlightOnHover:!0,totalRecords:o.length,recordsPerPage:p,page:C,onPageChange:t=>P(t),recordsPerPageOptions:N,onRecordsPerPageChange:a,sortStatus:s,onSortStatusChange:m,paginationText:({from:t,to:f,totalRecords:S})=>`Showing  ${t} to ${f} of ${S} entries`})})})}),e(k,{appear:!0,show:u,as:n.Fragment,children:r(R,{as:"div",open:u,onClose:()=>d(!1),className:"relative z-[51]",children:[e(k.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0 bg-[black]/60"})}),e("div",{className:"fixed inset-0 overflow-y-auto",children:e("div",{className:"flex min-h-full items-center justify-center px-4 py-8",children:e(k.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:r(R.Panel,{className:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg text-black dark:text-white-dark",children:[e("button",{type:"button",onClick:()=>d(!1),className:"absolute top-4 ltr:right-4 rtl:left-4 text-gray-400 hover:text-gray-800 dark:hover:text-gray-600 outline-none",children:e(Y,{})}),e("div",{className:"text-lg font-medium bg-[#fbfbfb] dark:bg-[#121c2c] ltr:pl-5 rtl:pr-5 py-3 ltr:pr-[50px] rtl:pl-[50px]",children:l.id?"Edit Contact":"Add Contact"}),e("div",{className:"p-5",children:r("form",{children:[r("div",{className:"mb-5",children:[e("label",{htmlFor:"name",children:"Title"}),e("input",{id:"title",type:"text",name:"title",placeholder:"Enter Name",className:"form-input",value:l.title,onChange:t=>i(t)})]}),r("div",{className:"flex gap-4",children:[r("div",{className:"mb-5 w-1/2",children:[e("label",{htmlFor:"email",children:"Quantity"}),e("input",{id:"quantity",type:"number",name:"quantity",placeholder:"Enter Email",className:"form-input",value:l.quantity,onChange:t=>i(t)})]}),r("div",{className:"mb-5 w-1/2",children:[e("label",{htmlFor:"number",children:"Expected Quantity"}),e("input",{id:"expexted_quantity",type:"number",name:"expexted_quantity",placeholder:"Enter Phone Number",className:"form-input",value:l.expexted_quantity,onChange:t=>i(t)})]})]}),r("div",{className:"flex justify-end items-center mt-8",children:[e("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>d(!1),children:"Cancel"}),r("button",{type:"button",className:"btn btn-primary ltr:ml-4 rtl:mr-4",onClick:F,children:[l.id?"Update":"Add",b&&e(D,{})]})]})]})})]})})})})]})})]})};export{O as default};
