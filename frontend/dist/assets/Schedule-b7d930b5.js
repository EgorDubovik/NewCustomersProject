import{e as y,u as C,r as a,g as v,h as k,s as D,b as P,j as c,a as t,L as A,i as L,P as N,c as b}from"./index-9d6fbf9e.js";import{A as E}from"./AppointmentsScheduler-f899fb93.js";const V=()=>{const u=y(),m=C(),[p,f]=a.useState([]),[h,i]=a.useState("day"),l=v(e=>e.themeConfig.theme),[o,g]=k(),[S,x]=a.useState(new Date);a.useEffect(()=>{u(D("Schedule"))});const[r,n]=a.useState("loading");a.useEffect(()=>{n("success"),n("loading"),P.get("/appointment").then(s=>{console.log(s.data.appointments),f(s.data.appointments),n("success")}).catch(s=>{n("error"),console.log(s)});const e=o.get("currentDate");e&&x(new Date(e))},[]),a.useEffect(()=>{const e=()=>{window.innerWidth<768?i("day"):i("week")};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}},[]);const w=e=>{m("/appointment/"+e)};return c("div",{children:[c("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[t("h2",{className:"text-xl",children:"Schedule"}),t("div",{className:"flex gap-2 md:justify-end justify-around mb-2",children:t("div",{className:"flex-auto md:flex-none ",children:c(A,{to:"/schedule/maps/todays",className:"flex items-center ",children:[t(L,{className:"mr-1"}),"Map View"]})})})]}),r==="loading"&&t(N,{}),r==="error"&&t(b,{}),r==="success"&&t("div",{className:"py-4",children:t(E,{onCurrentDateChange:e=>{console.log(e),o.set("currentDate",e.toISOString()),g(o)},startTime:"07:00",endTime:"20:00",currentDate:S,viewType:h,appointments:p,onClickHandler:e=>{w(e.id)},setAppointmentStyle:e=>{console.log(e);let s={},d={};return e.status===2&&(s={backgroundColor:l==="dark"?"#4a4a4ab0":"#ccc",borderLeft:"3px solid "+e.backgroundColor},d={color:l==="dark"?"#ffffff":"#000000"}),{extendedBackgroundStyles:s,extendedTitleStyle:d}}})})]})};export{V as default};
