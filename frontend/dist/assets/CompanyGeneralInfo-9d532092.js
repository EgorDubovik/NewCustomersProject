import{r as d,j as n,a as e,B as w,b as g,C as N,x as C,P as x,a3 as b,c as L}from"./index-d9a7cbca.js";const k=c=>{const{companySettings:t,setCompanySettings:r}=c,[i,o]=d.useState(!1),l=m=>{isNaN(m.target.value)||r({...t,taxRate:m.target.value})},s=()=>{i||(o(!0),g.put("/company/settings",{taxRate:t.taxRate}).then(m=>{N("Tax Rate Updated"),console.log(m)}).catch(m=>{C("Something went wrong, Please try again later"),console.log(m)}).finally(()=>{o(!1)}))};return n("div",{className:"panel",children:[e("div",{className:"panel-header",children:"Tax Rate"}),e("div",{className:"panel-body mt-2",children:n("div",{className:"flex justify-between items-center gap-2",children:[e("input",{value:t.taxRate,type:"text",className:"form-input",placeholder:"Tax Rate",onChange:l}),e("span",{children:"%"}),n("button",{className:"btn btn-primary",onClick:s,children:["Save ",i&&e(w,{})]})]})})]})};const R=c=>{const{company:t,setCompany:r}=c,i=d.useRef(null),[o,l]=d.useState(!1),[s,m]=d.useState(),h=()=>{i.current&&!o&&i.current.click()},y=u=>{var a;const p=(a=u.target.files)==null?void 0:a[0];p&&m(p)},f=async()=>{if(!s){console.error("No file selected");return}console.log("File uploaded successfully:",s),l(!0);const u=s,p=new FormData;p.append("logo",u);try{const a=await g.post("company/settings/logo",p,{headers:{"Content-Type":"multipart/form-data"}});N("Company Logo Updated"),console.log("File uploaded successfully:",a.data),r({...t,logo:a.data.newPath})}catch(a){C("Something went wrong, Please try again later"),console.error("Error uploading file:",a)}finally{l(!1),m(void 0)}};return d.useEffect(()=>{s&&f()},[s]),n("div",{className:"panel",children:[e("div",{className:"panel-header",children:"Company Logo"}),n("div",{className:"panel-body",children:[e("div",{className:"flex justify-center items-center",children:e("div",{className:"flex justify-center items-center w-3/4 py-4",children:o?e(x,{}):e("img",{src:t.logo??"/assets/images/file-preview.svg",alt:"company logo",className:"w-full"})})}),e("div",{className:"flex justify-center items-center mt-3",children:n("div",{className:"w-full",children:[e("button",{onClick:h,className:"btn btn-primary w-full",children:"Change Logo"}),e("input",{type:"file",ref:i,style:{display:"none"},onChange:y,accept:"image/*"})]})})]})]})},P=c=>{var h,y,f,u,p;const{company:t,setCompany:r}=c,[i,o]=d.useState(!1),l=(a,S)=>{r(v=>({...v,[a]:S}))},s=(a,S)=>{r(v=>({...v,address:{...v.address,[a]:S}}))},m=()=>{i||(o(!0),g.put("/company/settings/update-info",t).then(a=>{N("Company Info Updated")}).catch(a=>{console.log(a),C("Something went wrong, Please try again later")}).finally(()=>{o(!1)}))};return n("div",{className:"panel",children:[e("div",{className:"panel-header",children:"Company Info"}),n("div",{className:"panel-body",children:[n("div",{className:"mt-4",children:[e("label",{children:"Company Name"}),e("input",{value:t.name??"",type:"text",className:"form-input",placeholder:"Company Name",onChange:a=>l("name",a.target.value)})]}),n("div",{className:"mt-4",children:[e("label",{children:"Company Email"}),e("input",{value:t.email??"",type:"text",className:"form-input",placeholder:"Company Email",onChange:a=>l("email",a.target.value)})]}),n("div",{className:"mt-4",children:[e("label",{children:"Company Phone"}),e("input",{value:t.phone??"",type:"text",className:"form-input",placeholder:"Company Phone",onChange:a=>l("phone",a.target.value)})]}),n("div",{className:"mt-4",children:[e("label",{children:"Address line 1"}),e("input",{value:((h=t.address)==null?void 0:h.line1)??"",type:"text",className:"form-input",placeholder:"Address, street",onChange:a=>s("line1",a.target.value)})]}),n("div",{className:"mt-4",children:[e("label",{children:"Address line 2"}),e("input",{value:((y=t.address)==null?void 0:y.line2)??"",type:"text",className:"form-input",placeholder:"Apt, Suite",onChange:a=>s("line2",a.target.value)})]}),n("div",{className:"mt-4",children:[e("label",{children:"City"}),e("input",{value:((f=t.address)==null?void 0:f.city)??"",type:"text",className:"form-input",placeholder:"Company City",onChange:a=>s("city",a.target.value)})]}),n("div",{className:"mt-4 flex justify-between items-center gap-4",children:[n("div",{className:"",children:[e("label",{children:"State"}),e("input",{value:((u=t.address)==null?void 0:u.state)??"",type:"text",className:"form-input",placeholder:"Company State",onChange:a=>s("state",a.target.value)})]}),n("div",{className:"",children:[e("label",{children:"Zip"}),e("input",{value:((p=t.address)==null?void 0:p.zip)??"",type:"text",className:"form-input",placeholder:"Company Zip",onChange:a=>s("zip",a.target.value)})]})]}),e("div",{className:"mt-4",children:n("button",{className:"btn btn-primary w-full",onClick:()=>m(),children:["Update Company Info",i&&e(w,{})]})})]})]})},E=c=>{const[t,r]=d.useState("loading"),[i,o]=d.useState(null);return d.useEffect(()=>{g.get(c).then(l=>{console.log(l.data),o(l.data),r("success")}).catch(l=>{r("error"),console.log(l)})},[c]),{loadingStatus:t,data:i}},j=c=>{const{companySettings:t,setCompanySettings:r}=c;console.log(t);const[i,o]=d.useState(!1),l=()=>{o(!0),g.put("/company/settings",{reviewLink:t.reviewLink}).then(s=>{r({...t,reviewLink:t.reviewLink})}).catch(s=>{C("Something went wrong, Please try again later"),console.log(s)}).finally(()=>{N("Review Link Updated"),o(!1)})};return n("div",{className:"panel",children:[e("div",{className:"panel-header",children:"Add link for review"}),e("div",{className:"panel-body mt-2",children:n("div",{className:"flex items-center gap-2",children:[e("input",{type:"text",value:t.reviewLink,onChange:s=>r({...t,reviewLink:s.target.value}),className:"form-input w-3/4",placeholder:"Enter review link"}),e("button",{className:"btn btn-primary",onClick:l,children:i?e(b,{}):"Save"})]})})]})},F=()=>{const[c,t]=d.useState({}),[r,i]=d.useState({}),{loadingStatus:o,data:l}=E("/company/settings");return d.useEffect(()=>{l&&(t(l.companySettings),i(l.company))},[l]),n("div",{children:[e("div",{className:"flex justify-start items-center text-lg",children:e("h1",{children:"Company General Settings"})}),o==="loading"&&e(x,{}),o==="error"&&e(L,{}),o==="success"&&e("div",{className:"py-4",children:n("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n("div",{className:"grid grid-rows-none gap-3",children:[e(R,{company:r,setCompany:i}),e(k,{companySettings:c,setCompanySettings:t}),e(j,{companySettings:c,setCompanySettings:t})]}),e("div",{className:"grid grid-rows-none gap-3",children:e(P,{company:r,setCompany:i})})]})})]})};export{F as default};
