import{r,e as B,s as M,h as v,b as w,j as t,a as e,P as _,c as G,K as H,M as K,O,R as X,T as Y,U as q,z as J,E as Q,t as x,_ as T,B as W,x as C,C as I}from"./index-ca6a8653.js";import{I as Z}from"./IconX-74e1513f.js";import{C as ee}from"./Google-a118c78b.js";const E=c=>c.split(" ").map(o=>o[0]).join(""),se=()=>{const[c,o]=r.useState("loading"),L=B();r.useEffect(()=>{L(M("Employees"))});const d=v(a=>a.themeConfig.rolesTitle),g=v(a=>a.themeConfig.rolesColor),u=v(a=>a.themeConfig.user),[k,n]=r.useState(!1),[p,D]=r.useState(localStorage.getItem("customerViewType")||"grid");r.useState([]);const[l,i]=r.useState({id:"",name:"",email:"",phone:"",pass1:"",pass2:"",rolesArray:[2],color:"#1565c0"}),S=a=>{localStorage.setItem("customerViewType",a),D(a)},[y,$]=r.useState(""),[m,N]=r.useState([]),[F,V]=r.useState(m),[z,b]=r.useState(!1);r.useEffect(()=>{o("loading"),w.get("/employees").then(a=>{a.status==200&&(o("success"),N(a.data.employees))}).catch(a=>{o("error"),console.log(a)})},[]),r.useEffect(()=>{V(()=>m.filter(a=>a.name.toLowerCase().includes(y.toLowerCase())))},[y,m]);const A=a=>{if(d[a]==="Admin"&&l.id==u.id){C("You can not change your Admin role");return}l.rolesArray.includes(a)?i({...l,rolesArray:l.rolesArray.filter(s=>s!==a)}):i({...l,rolesArray:[...l.rolesArray,a]})},P=(a=null)=>{i(a),n(!0)},j=(a=null)=>{},R=()=>{l.id?(b(!0),w.put(`/employees/${l.id}`,l).then(a=>{N(m.map(s=>s.id===l.id?a.data.employee:s)),I("Employee updated successfully"),n(!1)}).catch(a=>{console.log(a),C("Something went wrong. Please try again later")}).finally(()=>{b(!1)})):(b(!0),w.post("/employees",l).then(a=>{N([...m,a.data.employee]),I("Employee added successfully"),n(!1)}).catch(a=>{console.log(a),C("Something went wrong. Please try again later")}).finally(()=>{b(!1)}))},U=()=>{i({id:"",name:"",email:"",phone:"",pass1:"",pass2:"",rolesArray:[2],color:"#1565c0"}),n(!0)},h=a=>{i({...l,[a.target.name]:a.target.value})};return t("div",{children:[c==="loading"&&e(_,{}),c==="error"&&e(G,{}),c==="success"&&t("div",{children:[t("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e("h2",{className:"text-xl",children:"Employees"}),t("div",{className:"flex sm:flex-row flex-col sm:items-center sm:gap-3 gap-4 w-full sm:w-auto",children:[t("div",{className:"flex gap-3",children:[e("div",{children:u.roles.includes(1)&&t("button",{type:"button",className:"btn btn-primary",onClick:()=>U(),children:[e(H,{className:"ltr:mr-2 rtl:ml-2"}),"Add Employee"]})}),e("div",{children:e("button",{type:"button",className:`btn btn-outline-primary p-2 ${p==="list"&&"bg-primary text-white"}`,onClick:()=>S("list"),children:e(K,{})})}),e("div",{children:e("button",{type:"button",className:`btn btn-outline-primary p-2 ${p==="grid"&&"bg-primary text-white"}`,onClick:()=>S("grid"),children:e(O,{})})})]}),t("div",{className:"relative",children:[e("input",{type:"text",placeholder:"Search Contacts",className:"form-input py-2 ltr:pr-11 rtl:pl-11 peer",value:y,onChange:a=>$(a.target.value)}),e("button",{type:"button",className:"absolute ltr:right-[11px] rtl:left-[11px] top-1/2 -translate-y-1/2 peer-focus:text-primary",children:e(X,{className:"mx-auto"})})]})]})]}),p==="list"&&e("div",{className:"mt-5 panel p-0 border-0 overflow-hidden",children:e("div",{className:"table-responsive",children:t("table",{className:"table-striped table-hover",children:[e("thead",{children:t("tr",{children:[e("th",{}),e("th",{children:"Name"}),e("th",{children:"Phone"}),e("th",{children:"Email"}),e("th",{children:"Roles"}),e("th",{className:"!text-center",children:"Actions"})]})}),e("tbody",{children:F.map(a=>t("tr",{children:[e("td",{children:e("span",{className:"flex justify-center items-center w-10 h-10 text-center rounded-full object-cover bg-'bg-danger text-white",style:{backgroundColor:a.color},children:E(a.name)})}),e("td",{children:e("div",{className:"flex items-center w-max",children:e("div",{className:"font-bold",children:a.name})})}),e("td",{children:a.phone}),e("td",{className:"whitespace-nowrap",children:a.email}),e("td",{children:a.rolesArray.map((s,f)=>e("span",{className:`badge badge-outline-${g[s]} ml-2`,children:d[s]},f))}),e("td",{children:u.roles.includes(1)&&t("div",{className:"flex gap-4 items-center justify-center",children:[e("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>P(a),children:"Edit"}),e("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>j(a),children:"Delete"})]})})]},a.id))})]})})}),p==="grid"&&e("div",{className:"grid 2xl:grid-cols-4 xl:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-6 mt-5 w-full",children:F.map(a=>e("div",{className:"bg-white dark:bg-[#1a294166] rounded-md shadow",children:e("div",{className:"p-4",children:t("div",{className:"flex items-center relative",children:[u.roles.includes(1)&&e("div",{className:"absolute top-0 right-0 z-10",children:e("div",{className:"dropdown",children:e(Y,{offset:[0,5],btnClassName:"align-middle",button:e(q,{className:"rotate-90 opacity-70"}),children:t("ul",{className:"whitespace-nowrap",children:[e("li",{children:t("button",{type:"button",onClick:()=>P(a),children:[e(J,{className:"w-4.5 h-4.5 ltr:mr-2 rtl:ml-2 shrink-0"}),"Edit"]})}),e("li",{children:t("button",{type:"button",onClick:()=>j(a),children:[e(Q,{className:"ltr:mr-2 rtl:ml-2 shrink-0"}),"Delete"]})})]})})})}),e("div",{className:"avatar",children:e("span",{className:"flex justify-center items-center w-10 h-10 text-center rounded-full object-cover bg-'bg-danger text-white",style:{backgroundColor:a.color},children:E(a.name)})}),t("div",{className:"ml-2 w-full overflow-hidden",children:[e("div",{className:"user-info",children:t("div",{className:"user-name w-full font-bold dark:text-white",children:[a.name,a.rolesArray.map((s,f)=>e("span",{className:`badge badge-outline-${g[s]} ml-2 text-[10px]`,onClick:()=>A(f),children:d[s]},f))]})}),e("div",{className:"user-address mt-2 ml-1",children:a.phone})]})]})})},a.id))})]}),e(x,{appear:!0,show:k,as:r.Fragment,children:t(T,{as:"div",open:k,onClose:()=>n(!1),className:"relative z-[51]",children:[e(x.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e("div",{className:"fixed inset-0 bg-[black]/60"})}),e("div",{className:"fixed inset-0 overflow-y-auto",children:e("div",{className:"flex min-h-full items-center justify-center px-4 py-8",children:e(x.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:t(T.Panel,{className:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-lg text-black dark:text-white-dark",children:[e("button",{type:"button",onClick:()=>n(!1),className:"absolute top-4 ltr:right-4 rtl:left-4 text-gray-400 hover:text-gray-800 dark:hover:text-gray-600 outline-none",children:e(Z,{})}),e("div",{className:"text-lg font-medium bg-[#fbfbfb] dark:bg-[#121c2c] ltr:pl-5 rtl:pr-5 py-3 ltr:pr-[50px] rtl:pl-[50px]",children:l.id?"Edit Contact":"Add Contact"}),e("div",{className:"p-5",children:t("form",{children:[t("div",{className:"mb-5",children:[e("label",{htmlFor:"name",children:"Name"}),e("input",{id:"name",type:"text",name:"name",placeholder:"Enter Name",className:"form-input",value:l.name,onChange:a=>h(a)})]}),t("div",{className:"mb-5",children:[e("label",{htmlFor:"email",children:"Email"}),e("input",{id:"email",type:"email",name:"email",placeholder:"Enter Email",className:"form-input",value:l.email,onChange:a=>h(a)})]}),t("div",{className:"mb-5",children:[e("label",{htmlFor:"number",children:"Phone Number"}),e("input",{id:"phone",type:"text",name:"phone",placeholder:"Enter Phone Number",className:"form-input",value:l.phone,onChange:a=>h(a)})]}),t("div",{className:"mb-5",children:[e("label",{htmlFor:"pass1",children:"Password"}),e("input",{id:"pass1",type:"password",name:"pass1",placeholder:"Enter Password",className:"form-input",value:l.pass1,onChange:a=>h(a)})]}),t("div",{className:"mb-5",children:[e("label",{htmlFor:"pass2",children:"Confirm password"}),e("input",{id:"pass2",type:"password",name:"pass2",placeholder:"Confirm password",className:"form-input",value:l.pass2,onChange:a=>h(a)})]}),t("div",{className:"mb-5",children:[e("span",{children:"Choose role:"}),d.map((a,s)=>{if(s!==0)return e("span",{className:`badge cursor-pointer ${l.rolesArray.includes(s)?"bg":"badge-outline"}-${g[s]} ml-4`,onClick:()=>A(s),children:d[s]},s)})]}),e("div",{className:"mt-8",children:e("label",{htmlFor:"color",children:"Choose Color:"})}),t("div",{className:"choose-color mb-5 flex justify-center items-center",children:[e("div",{className:"",children:e("span",{className:"flex justify-center items-center w-10 h-10 text-center rounded-full object-cover bg-'bg-danger text-white",style:{backgroundColor:l.color},children:E(l.name)})}),e("div",{className:"ml-10",children:e(ee,{onChangeComplete:a=>i({...l,color:a.hex}),colors:["#1565c0","#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#00bcd4","#009688","#4caf50","#60b300","#ff9800","#ff5722"]})})]}),t("div",{className:"flex justify-end items-center mt-8",children:[e("button",{type:"button",className:"btn btn-outline-danger",onClick:()=>n(!1),children:"Cancel"}),t("button",{type:"button",className:"btn btn-primary ltr:ml-4 rtl:mr-4",onClick:R,children:[l.id?"Update":"Add",z&&e(W,{})]})]})]})})]})})})})]})})]})};export{se as default};
