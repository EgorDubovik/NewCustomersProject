import{r as s,j as n,a as e,B as w,b as k,i as C,C as M,G as B,y as S,P,c as L}from"./index-0ad8621a.js";const I=h=>{const p=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}],b=[{time:"12:00 AM",value:0},{time:"1:00 AM",value:1},{time:"2:00 AM",value:2},{time:"3:00 AM",value:3},{time:"4:00 AM",value:4},{time:"5:00 AM",value:5},{time:"6:00 AM",value:6},{time:"7:00 AM",value:7},{time:"8:00 AM",value:8},{time:"9:00 AM",value:9},{time:"10:00 AM",value:10},{time:"11:00 AM",value:11},{time:"12:00 PM",value:12},{time:"1:00 PM",value:13},{time:"2:00 PM",value:14},{time:"3:00 PM",value:15},{time:"4:00 PM",value:16},{time:"5:00 PM",value:17},{time:"6:00 PM",value:18},{time:"7:00 PM",value:19},{time:"8:00 PM",value:20},{time:"9:00 PM",value:21},{time:"10:00 PM",value:22},{time:"11:00 PM",value:23}],[r,g]=s.useState(h.workingTime||{monday:{from:8,to:17},tuesday:{from:8,to:17},wednesday:{from:8,to:17},thursday:{from:8,to:17},friday:{from:8,to:17},saturday:{from:8,to:17},sunday:{from:8,to:17}}),[d,u]=s.useState(!1),f=t=>{const{name:l,value:a}=t.target,[i,N]=l.split("-");g(y=>({...y,[i]:{...y[i],[N]:Number(a)}}))},v=()=>{d||(u(!0),k.post("/company/settings/book-appointment/working-time",{workingTime:JSON.stringify(r)}).then(t=>{console.log(t.data)}).catch(t=>{console.log(t)}).finally(()=>{u(!1)}))};return n("div",{className:"panel p-4",children:[e("div",{className:"mt-1 text-center font-bold text-lg mb-4",children:"Working time"}),n("div",{className:"grid grid-flow-row gap-3",children:[p.map((t,l)=>n("div",{className:"grid grid-cols-3 gap-3",children:[e("label",{htmlFor:t.value,children:t.label}),e("select",{id:t.value,value:r[t.value].from,name:t.value+"-from",className:"form-select text-white-dark",onChange:f,children:b.map((a,i)=>e("option",{value:a.value,children:a.time},i))}),e("select",{id:t.value,value:r[t.value].to,name:t.value+"-to",className:"form-select text-white-dark",onChange:f,children:b.map((a,i)=>e("option",{value:a.value,children:a.time},i))})]},l)),e("div",{className:"mt-4 w-full",children:n("button",{className:"btn btn-primary w-full",onClick:v,children:["Save ",d&&e(w,{})]})})]})]})},E=h=>{const[p,b]=s.useState(h.settings),r=s.useRef(null),[g,d]=s.useState(!1),[u,f]=s.useState(!1),v=C(o=>o.themeConfig.companySettings.companyTags),[t,l]=s.useState(h.bookAppointmentTagsId),[a,i]=s.useState([]);s.useEffect(()=>{const o=v.filter(c=>t.includes(c.id));console.log("bookAppointmentTags:",o),i(o)},[t,v]);const N=()=>{var o,c;(o=r.current)==null||o.select(),navigator.clipboard&&navigator.clipboard.writeText(((c=r.current)==null?void 0:c.value)||"").then(()=>{B("Link copied successfully"),console.log("copied")}).catch(m=>{S("Failed to copy link"),console.log(m)})},y=o=>{d(!0),k.post("/company/settings/book-appointment/update",{active:o.target.checked}).then(c=>{console.log(c.data),b({...p,active:c.data.active})}).catch(c=>{console.log(c),S("Failed to update book appointment active status")}).finally(()=>{d(!1)})},x=o=>{const c=a;i(o),f(!0),k.post("/company/settings/book-appointment/tags",{tags:o.map(m=>m.id)}).then(m=>{console.log(m.data)}).catch(m=>{console.log(m),S("Failed to update book appointment tags"),i(c)}).finally(()=>{f(!1)})},T=o=>{const c=[...a,v.find(m=>m.id===o)];x(c)},A=o=>{const c=a.filter(m=>m.id!==o);x(c)};return e("div",{className:"panel p-4",children:n("div",{className:"mb-2",children:[e("div",{className:"mb-4",children:p.active?e("p",{className:"text-green-500",children:"Book appointment online is active"}):e("p",{className:"text-red-500",children:"Book appointment online is inactive"})}),n("div",{className:"flex items-center",children:[n("div",{className:"flex items-center",children:[n("label",{className:"w-12 h-6 relative mt-2",children:[e("input",{type:"checkbox",className:"custom_switch absolute w-full h-full opacity-0 z-10 cursor-pointer peer",id:"custom_switch_checkbox1",checked:p.active,onChange:y}),e("span",{className:"bg-[#ebedf2] dark:bg-dark block h-full rounded-full before:absolute before:left-1 before:bg-white dark:before:bg-white-dark dark:peer-checked:before:bg-white before:bottom-1 before:w-4 before:h-4 before:rounded-full peer-checked:before:left-7 peer-checked:bg-primary before:transition-all before:duration-300"})]}),g&&e("div",{className:"w-5 h-5 ml-2",children:e(w,{})})]}),n("div",{className:"flex w-full ml-10",children:[e("input",{disabled:!p.active,ref:r,readOnly:!0,id:"addonsRight",type:"text",placeholder:"",className:"form-input ltr:rounded-r-none rtl:rounded-l-none",value:window.location.origin+"/appointment/book/"+p.key}),e("button",{type:"button",className:"btn btn-secondary ltr:rounded-l-none rtl:rounded-r-none",onClick:N,children:e(M,{})})]})]}),n("div",{className:"grid grid-cols-2 mt-4",children:[n("div",{className:"border-r dark:border-gray-800 pr-2",children:["Choose a tag to link with this book appointment online:",e("div",{className:"flex flex-wrap gap-2 mt-2",children:v.map((o,c)=>a.find(m=>m.id===o.id)?null:e("button",{onClick:()=>T(o.id),className:"btn btn-sm border-none text-white shadow-none",style:{backgroundColor:o.color},children:o.title},c))})]}),n("div",{className:"pl-2",children:[n("div",{className:"flex items-center",children:["Selected tags: ",u&&e(w,{})]}),e("div",{className:"flex gap-2 mt-2",children:a.map((o,c)=>e("button",{onClick:()=>A(o.id),className:"btn btn-sm border-none text-white shadow-none",style:{backgroundColor:o.color},children:o.title},c))})]})]})]})})},j=h=>{const[p,b]=s.useState(h.loadedCompanyServices||[]),[r,g]=s.useState(h.bookService||[]),[d,u]=s.useState([]),f=t=>{let l=r.map(a=>a.id);l.push(t.id),k.post("/company/settings/book-appointment/update-services",{services:l}).then(a=>{console.log(a.data)}).catch(a=>{u([...d,t]),g(r.filter(i=>i.id!==t.id)),console.log(a)}),u(d.filter(a=>a.id!==t.id)),g([...r,t])},v=t=>{let l=r.map(a=>a.id);l=l.filter(a=>a!==t.id),k.post("/company/settings/book-appointment/update-services",{services:l}).then(a=>{console.log(a.data)}).catch(a=>{g([...r,t]),u(d.filter(i=>i.id!==t.id)),console.log(a)}),g(r.filter(a=>a.id!==t.id)),u([...d,t])};return s.useEffect(()=>{u(p.filter(t=>!r.some(l=>l.id===t.id)))},[]),n("div",{className:"grid grid-cols-2",children:[n("div",{className:"px-2",children:[e("p",{className:"my-2 mb-4",children:"Click to add"}),d.map((t,l)=>n("div",{className:"flex justify-between p-2 bg-slate-950 mt-2 rounded cursor-pointer",onClick:()=>{f(t)},children:[n("div",{children:[e("p",{className:"text-white",children:t.title}),e("p",{children:t.description})]}),e("div",{children:e("p",{className:"text-white",children:t.price})})]},l))]}),n("div",{className:"px-2 border-l dark:border-gray-800",children:[e("p",{className:"my-2 mb-4",children:"Click to remove"}),r.map((t,l)=>n("div",{className:"flex justify-between p-2 dark:bg-slate-950 bg-slate-100 mt-2 rounded cursor-pointer",onClick:()=>{v(t)},children:[n("div",{children:[e("p",{className:"dark:text-white",children:t.title}),e("p",{className:"text-gray-500",children:t.description})]}),e("div",{children:e("p",{className:"dark:text-white",children:t.price})})]},l))]})]})},F=()=>(s.useState([]),n("div",{children:[e("h1",{className:"text-base",children:"Specify who will receive the booking request"}),e("div",{children:"list of employees"})]})),W=()=>{const[h,p]=s.useState("loading"),[b,r]=s.useState({}),[g,d]=s.useState([]),[u,f]=s.useState([]),[v,t]=s.useState([]),[l,a]=s.useState({monday:{from:0,to:0},tuesday:{from:0,to:0},wednesday:{from:0,to:0},thursday:{from:0,to:0},friday:{from:0,to:0},saturday:{from:0,to:0},sunday:{from:0,to:0}});return s.useEffect(()=>{k.get("/company/settings/book-appointment").then(i=>{console.log(i.data),a(JSON.parse(i.data.settings.working_time)),r(i.data.settings),d(i.data.companyServices||[]),f(i.data.bookAppointmentServices||[]),t(i.data.bookAppointmentTagsId||[]),p("success")}).catch(i=>{console.log(i),p("error")})},[]),e("div",{children:n("div",{children:[e("div",{className:"flex justify-start items-center text-lg",children:e("h1",{children:"Book Appointments online settings"})}),h==="loading"&&e(P,{}),h==="error"&&e(L,{}),h==="success"&&e("div",{className:"py-4",children:n("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-5",children:[e(I,{workingTime:l}),n("div",{className:"md:col-span-2",children:[e(E,{settings:b,bookAppointmentTagsId:v}),e("div",{className:"panel p-2 mt-5 pb-4",children:e(j,{loadedCompanyServices:g,bookService:u})})]}),e("div",{className:"panel",children:e(F,{})})]})})]})})};export{W as default};
