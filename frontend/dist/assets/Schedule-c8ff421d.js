import{e as x,u as v,r as s,g as C,s as S,b as y,j as E,a,P as b,c as A}from"./index-dab07de2.js";import{A as L}from"./AppointmentsScheduler-a91c2eb0.js";import"./moment-a9aaa855.js";const N=()=>{const g=x(),f=v(),[l,m]=s.useState([]),[h,d]=s.useState("week"),r=C(e=>e.themeConfig.theme);s.useEffect(()=>{g(S("Schedule"))});const[i,n]=s.useState("loading"),u=e=>{const p=t=>{console.log("getColors",r);let o=r==="dark"?"#ffffff29":"#ccc";o=t.status==0?t.bg:o;let c=t.status===0?"text-white":r==="dark"?"text-gray-300":"text-gray-500";return{bgColor:o,textColor:c}},w=e.map(t=>{const{bgColor:o,textColor:c}=p(t);return{id:t.id,title:t.title,start:t.start,end:t.end,status:t.status,bg:o,addClass:c}});m(w)};return s.useEffect(()=>{u(l)},[r]),s.useEffect(()=>{n("loading"),y.get("/appointment").then(e=>{u(e.data.appointments),n("success")}).catch(e=>{n("error"),console.log(e)})},[]),s.useEffect(()=>{const e=()=>{window.innerWidth<768?d("day"):d("week")};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}},[]),E("div",{children:[a("div",{className:"flex items-center justify-between flex-wrap gap-4",children:a("h2",{className:"text-xl",children:"Schedule"})}),i==="loading"&&a(b,{}),i==="error"&&a(A,{}),i==="success"&&a("div",{className:"py-4",children:a(L,{appointments:l,onClickHandler:e=>{f("/appointment/"+e.id)},viewType:h,startTime:"07:00",endTime:"20:00"})})]})};export{N as default};
