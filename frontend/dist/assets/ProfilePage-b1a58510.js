import{r as o,j as a,a as e,B as w,b as h,C as N,h as f,P as b,c as v,F as P,W as x}from"./index-8c34f6ad.js";const y=()=>{const[d,r]=o.useState("loading"),[n,l]=o.useState(""),[m,c]=o.useState(!1),[s,i]=o.useState({oldPassword:"",newPassword:"",confirmPassword:""}),g=u=>{i({...s,[u.target.name]:u.target.value})};return a("div",{className:"panel",children:[e("p",{className:"text-base text-center",children:"Update password"}),d==="error"&&e("div",{className:"flex my-2 items-center p-3.5 rounded text-danger bg-danger-light dark:bg-danger-dark-light",children:n}),d==="success"&&e("div",{className:"flex my-2 items-center p-3.5 rounded text-success bg-success-light dark:bg-success-dark-light",children:n}),a("form",{className:"space-y-5",onSubmit:u=>{if(u.preventDefault(),r("loading"),s.newPassword!==s.confirmPassword){r("error"),l("New and Confirm passwords do not match");return}if(s.newPassword.length<4||s.oldPassword.length<4){r("error"),l("Password must be at least 4 characters");return}m||(c(!0),r("loading"),h.post("/user/update-password",s).then(p=>{console.log(p.data),r("success"),l(p.data.message),c(!1),i({oldPassword:"",newPassword:"",confirmPassword:""})}).catch(p=>{console.log(p),r("error"),l(p.response.data.message),c(!1)}))},children:[a("div",{children:[e("label",{htmlFor:"groupFname",children:"Enter old password"}),e("input",{id:"groupFname",type:"password",placeholder:"Old Password",className:"form-input",name:"oldPassword",value:s.oldPassword,onChange:g})]}),a("div",{children:[e("label",{htmlFor:"groupLname",children:"Enter new password"}),e("input",{id:"groupLname",type:"password",placeholder:"New password",className:"form-input",name:"newPassword",value:s.newPassword,onChange:g})]}),a("div",{children:[e("label",{htmlFor:"groupsecond",children:"Confirm new password"}),e("input",{id:"groupsecond",type:"password",placeholder:"Confirm password",className:"form-input",name:"confirmPassword",value:s.confirmPassword,onChange:g})]}),e("div",{className:"flex justify-end",children:a("button",{type:"submit",className:"btn btn-primary",children:["Submit",m&&e(w,{})]})})]})]})},C=d=>{const{user:r,setUser:n}=d,[l,m]=o.useState({}),[c,s]=o.useState(!1),i=(t,u)=>{n(p=>({...p,[t]:u}))},g=()=>{m({}),!c&&(s(!0),h.put("/user",r).then(t=>{N("User Info Updated")}).catch(t=>{console.log(t),m(t.response.data.errors)}).finally(()=>{s(!1)}))};return o.useEffect(()=>{console.log(l)},[l]),a("div",{className:"panel",children:[e("h3",{className:"text-lg font-semibold",children:"Update personal information"}),Object.keys(l).map((t,u)=>e("div",{className:"flex mb-2 items-center p-3.5 rounded text-danger bg-danger-light dark:bg-danger-dark-light",children:e("span",{className:"ltr:pr-2 rtl:pl-2",children:l[t]})})),a("div",{className:"mt-3",children:[a("div",{className:"mt-4",children:[e("label",{children:"User Name"}),e("input",{value:r.name??"",type:"text",className:"form-input",placeholder:"User Name",onChange:t=>i("name",t.target.value)})]}),a("div",{className:"mt-4",children:[e("label",{children:"User Email"}),e("input",{value:r.email??"",type:"text",className:"form-input",placeholder:"User Email",onChange:t=>i("email",t.target.value)})]}),a("div",{className:"mt-4",children:[e("label",{children:"User Phone"}),e("input",{value:r.phone??"",type:"text",className:"form-input",placeholder:"User Phone",onChange:t=>i("phone",t.target.value)})]}),e("div",{className:"mt-6",children:a("button",{className:"btn btn-primary w-full",onClick:g,children:["Update User Inforation",c&&e(w,{})]})})]})]})},S=()=>{const[d,r]=o.useState("loading"),[n,l]=o.useState({}),m=f(s=>s.themeConfig.rolesTitle),c=f(s=>s.themeConfig.rolesColor);return o.useEffect(()=>{r("loading"),h.get("/user").then(s=>{console.log("data:",s.data),r("success"),l(s.data.user)}).catch(s=>{r("error"),console.log(s)})},[]),a("div",{children:[e("div",{className:"flex items-center justify-between flex-wrap gap-4",children:e("h2",{className:"text-lg",children:"Profile information"})}),d==="loading"&&e(b,{}),d==="error"&&e(v,{}),d==="success"&&e(P,{children:a("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 py-4",children:[a("div",{className:"grid grid-rows-none gap-3",children:[a("div",{className:"panel",children:[a("div",{className:"flex items-center justify-center",children:[e("div",{className:"w-20 h-20 rounded-full bg-gray-200 dark:bg-gray-800 flex items-center justify-center text-2xl text-gray-300",style:{backgroundColor:n.color??"#ccc"},children:x(n.name)}),a("div",{className:"ml-5",children:[e("h5",{className:"font-semibold text-lg dark:text-white",children:n.name}),e("p",{children:n.phone}),e("p",{children:n.email})]})]}),e("div",{className:"mt-5 flex flex-wrap items-center justify-center gap-3",children:n.roles.map((s,i)=>e("span",{className:"badge badge-outline-"+(c[s.role]??"primary"),children:m[s.role]??"unknown"},i))})]}),e(y,{})]}),e("div",{className:"grid grid-rows-none gap-3",children:e(C,{user:n,setUser:l})})]})})]})};export{S as default};
