import{r,b as f,j as c,a as e,P as $,c as A,B as L,S as B,ak as F}from"./index-9d6fbf9e.js";import{I as j}from"./IconEdit-36f0bc60.js";import{I}from"./IconTrash-d25bf5a5.js";const O=()=>{const[l,n]=r.useState([]),[y,d]=r.useState("loading"),[T,w]=r.useState(""),[m,g]=r.useState(!1),[C,p]=r.useState(0),[s,i]=r.useState({id:0,title:"",color:"primary",company_id:0});r.useEffect(()=>{d("loading"),f.get("company/settings/tags").then(t=>{n(t.data),d("success")}).catch(t=>{d("error"),console.log(t)})},[]);const[u,h]=r.useState(!1),[a,b]=r.useState("primary"),N=["[#4A90E2]","[#7ED321]","[#D0021B]","[#F8E71C]","[#50E3C2]","[#D8D8D8]","[#4A4A4A]","[#9013FE]","[#FF4081]","[#00BCD4]"],v=()=>{h(!u)},D=t=>{i({...s,color:t}),h(!1)},x=()=>{s.id===0?k():P()},E=t=>{const o=l.find(S=>S.id===t);i(o||{id:0,title:"",color:"primary",company_id:0})},k=()=>{if(m)return;const t={title:s.title,color:s.color};g(!0),f.post("company/settings/tags",t).then(o=>{n([...l,o.data]),w(""),i({...s,title:""})}).catch(o=>{alert("Something went wrong. Please try again later"),console.log(o)}).finally(()=>{g(!1)})},P=()=>{m||f.put(`company/settings/tags/${s.id}`,s).then(t=>{t.status===200&&n(l.map(o=>o.id===s.id?s:o))}).catch(t=>{alert("Something went wrong. Please try again later"),console.log(t)}).finally(()=>{g(!1),i({id:0,title:"",color:"primary",company_id:0})})};return{tags:l,loadingStatus:y,tag:s,setTag:i,saveTagHandle:x,isDropdownOpen:u,handleColorClick:v,colors:N,selectColor:D,selectedColor:a,storeStatus:m,deleteStatus:C,handelEditTag:E,handleDeleteTag:t=>{p(t),f.delete(`company/settings/tags/${t}`).then(o=>{console.log(o),o.status===200&&n(l.filter(S=>S.id!==t))}).catch(o=>{alert("Something went wrong. Please try again later"),console.log(o)}).finally(()=>{p(0)})}}},z=()=>{const{loadingStatus:l,tag:n,setTag:y,selectColor:d,selectedColor:T,isDropdownOpen:w,colors:m,storeStatus:g,saveTagHandle:C,handelEditTag:p,handleColorClick:s,deleteStatus:i,handleDeleteTag:u,tags:h}=O();return c("div",{children:[l==="loading"&&e($,{}),l==="error"&&e(A,{}),l==="success"&&c("div",{className:"panel md:w-1/2 w-full m-auto",children:[e("h3",{className:"font-semibold text-lg dark:text-white-light",children:"Create or remove company tags"}),c("div",{className:"flex items-center gap-2",children:[e("input",{type:"text",value:n.title,onChange:a=>y({...n,title:a.target.value}),className:"form-input w-3/4",placeholder:"Enter tag title"}),e("div",{id:"color",className:`w-1/4 bg-${n.color} h-10 rounded cursor-pointer relative`,onClick:s,children:w&&e("div",{className:"absolute w-full top-8 shadow-lg mt-2 rounded",children:m.map((a,b)=>n.color!==a&&e("div",{className:`p-2 mt-2 cursor-pointer bg-${a} h-10 rounded`,onClick:()=>d(a)},b))})}),e("button",{className:"btn btn-primary",onClick:C,children:g?e(L,{}):n.id===0?"Add":"Update"})]}),e("div",{className:"mt-4",children:h.map((a,b)=>c("div",{className:"inline-flex ml-4 mb-2",children:[e("button",{className:`btn btn-sm bg-${a.color} rounded-r-none border-none text-white shadow-none`,children:i===a.id?e(B,{}):a.title}),e("div",{className:"dropdown border-none",children:e(F,{placement:"bottom-start",btnClassName:`btn btn-sm dropdown-toggle bg-${a.color} rounded-l-none border-0 before:border-[5px] before:border-l-transparent before:border-r-transparent  before:border-b-0 h-full`,button:e("span",{className:"sr-only",children:"Toggle dropdown"}),children:c("ul",{className:"!min-w-[170px]",children:[e("li",{children:c("button",{type:"button",onClick:()=>p(a.id),children:[e(j,{})," ",e("span",{className:"ml-2",children:"Edit"})]})}),e("li",{children:c("button",{type:"button",onClick:()=>u(a.id),children:[e(I,{})," ",e("span",{className:"ml-2",children:"Delete"})]})})]})})})]},b))})]})]})};export{z as default};
