import{r as d,j as n,b as e,B as x,a as v,p as C,q as S,C as b,D as w}from"./index-1d0dc0ab.js";const R=c=>{const{companySettings:t,setCompanySettings:r}=c,[l,i]=d.useState(!1),s=p=>{isNaN(p.target.value)||r({...t,taxRate:p.target.value})},o=()=>{l||(i(!0),v.put("/company/settings",{taxRate:t.taxRate}).then(p=>{C("Tax Rate Updated"),console.log(p)}).catch(p=>{S("Something went wrong, Please try again later"),console.log(p)}).finally(()=>{i(!1)}))};return n("div",{className:"panel",children:[e("div",{className:"panel-header",children:"Tax Rate"}),e("div",{className:"panel-body mt-2",children:n("div",{className:"flex justify-between items-center gap-2",children:[e("input",{value:t.taxRate,type:"text",className:"form-input",placeholder:"Tax Rate",onChange:s}),e("span",{children:"%"}),n("button",{className:"btn btn-primary",onClick:o,children:["Save ",l&&e(x,{})]})]})})]})};const L=c=>{const{company:t,setCompany:r}=c,l=d.useRef(null),[i,s]=d.useState(!1),[o,p]=d.useState(),g=()=>{l.current&&!i&&l.current.click()},h=u=>{var a;const m=(a=u.target.files)==null?void 0:a[0];m&&p(m)},y=async()=>{if(!o){console.error("No file selected");return}console.log("File uploaded successfully:",o),s(!0);const u=o,m=new FormData;m.append("logo",u);try{const a=await v.post("company/settings/logo",m,{headers:{"Content-Type":"multipart/form-data"}});C("Company Logo Updated"),console.log("File uploaded successfully:",a.data),r({...t,logo:a.data.newPath})}catch(a){S("Something went wrong, Please try again later"),console.error("Error uploading file:",a)}finally{s(!1),p(void 0)}};return d.useEffect(()=>{o&&y()},[o]),n("div",{className:"panel",children:[e("div",{className:"panel-header",children:"Company Logo"}),n("div",{className:"panel-body",children:[e("div",{className:"flex justify-center items-center",children:e("div",{className:"flex justify-center items-center w-3/4 py-4",children:i?e(b,{}):e("img",{src:t.logo??"/assets/images/file-preview.svg",alt:"company logo",className:"w-full"})})}),e("div",{className:"flex justify-center items-center mt-3",children:n("div",{className:"w-full",children:[e("button",{onClick:g,className:"btn btn-primary w-full",children:"Change Logo"}),e("input",{type:"file",ref:l,style:{display:"none"},onChange:h,accept:"image/*"})]})})]})]})},P=c=>{var g,h,y,u,m;const{company:t,setCompany:r}=c,[l,i]=d.useState(!1),s=(a,N)=>{r(f=>({...f,[a]:N}))},o=(a,N)=>{r(f=>({...f,address:{...f.address,[a]:N}}))},p=()=>{l||(i(!0),v.put("/company/settings/update-info",t).then(a=>{C("Company Info Updated")}).catch(a=>{console.log(a),S("Something went wrong, Please try again later")}).finally(()=>{i(!1)}))};return n("div",{className:"panel",children:[e("div",{className:"panel-header",children:"Company Info"}),n("div",{className:"panel-body",children:[n("div",{className:"mt-4",children:[e("label",{children:"Company Name"}),e("input",{value:t.name??"",type:"text",className:"form-input",placeholder:"Company Name",onChange:a=>s("name",a.target.value)})]}),n("div",{className:"mt-4",children:[e("label",{children:"Company Email"}),e("input",{value:t.email??"",type:"text",className:"form-input",placeholder:"Company Email",onChange:a=>s("email",a.target.value)})]}),n("div",{className:"mt-4",children:[e("label",{children:"Company Phone"}),e("input",{value:t.phone??"",type:"text",className:"form-input",placeholder:"Company Phone",onChange:a=>s("phone",a.target.value)})]}),n("div",{className:"mt-4",children:[e("label",{children:"Address line 1"}),e("input",{value:((g=t.address)==null?void 0:g.line1)??"",type:"text",className:"form-input",placeholder:"Address, street",onChange:a=>o("line1",a.target.value)})]}),n("div",{className:"mt-4",children:[e("label",{children:"Address line 2"}),e("input",{value:((h=t.address)==null?void 0:h.line2)??"",type:"text",className:"form-input",placeholder:"Apt, Suite",onChange:a=>o("line2",a.target.value)})]}),n("div",{className:"mt-4",children:[e("label",{children:"City"}),e("input",{value:((y=t.address)==null?void 0:y.city)??"",type:"text",className:"form-input",placeholder:"Company City",onChange:a=>o("city",a.target.value)})]}),n("div",{className:"mt-4 flex justify-between items-center gap-4",children:[n("div",{className:"",children:[e("label",{children:"State"}),e("input",{value:((u=t.address)==null?void 0:u.state)??"",type:"text",className:"form-input",placeholder:"Company State",onChange:a=>o("state",a.target.value)})]}),n("div",{className:"",children:[e("label",{children:"Zip"}),e("input",{value:((m=t.address)==null?void 0:m.zip)??"",type:"text",className:"form-input",placeholder:"Company Zip",onChange:a=>o("zip",a.target.value)})]})]}),e("div",{className:"mt-4",children:n("button",{className:"btn btn-primary w-full",onClick:()=>p(),children:["Update Company Info",l&&e(x,{})]})})]})]})},j=c=>{const[t,r]=d.useState("loading"),[l,i]=d.useState(null);return d.useEffect(()=>{v.get(c).then(s=>{console.log(s.data),i(s.data),r("success")}).catch(s=>{r("error"),console.log(s)})},[c]),{loadingStatus:t,data:l}},E=c=>n("div",{className:"panel",children:[e("div",{className:"panel-header",children:"Deposit settings"}),e("div",{className:"panel-body"})]}),F=()=>{const[c,t]=d.useState({}),[r,l]=d.useState({}),{loadingStatus:i,data:s}=j("/company/settings");return d.useEffect(()=>{s&&(t(s.companySettings),l(s.company))},[s]),n("div",{children:[e("div",{className:"flex justify-start items-center text-lg",children:e("h1",{children:"Company General Settings"})}),i==="loading"&&e(b,{}),i==="error"&&e(w,{}),i==="success"&&e("div",{className:"py-4",children:n("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e("div",{className:"grid grid-rows-none gap-3",children:e(L,{company:r,setCompany:l})}),e("div",{className:"grid grid-rows-none gap-3",children:e(P,{company:r,setCompany:l})}),n("div",{className:"grid grid-rows-none gap-3",children:[e(R,{companySettings:c,setCompanySettings:t}),e(E,{companySettings:c,setCompanySettings:t})]})]})})]})};export{F as default};
