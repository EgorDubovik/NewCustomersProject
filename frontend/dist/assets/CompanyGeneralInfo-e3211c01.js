import{r as d,j as n,a as e,B as w,b as v,G as N,y as C,P as x,ad as b,ae as L,c as k}from"./index-fe6e9605.js";const R=m=>{const{companySettings:t,setCompanySettings:c}=m,[s,i]=d.useState(!1),r=o=>{isNaN(o.target.value)||c({...t,taxRate:o.target.value})},l=()=>{s||(i(!0),v.put("/company/settings",{taxRate:t.taxRate}).then(o=>{N("Tax Rate Updated"),console.log(o)}).catch(o=>{C("Something went wrong, Please try again later"),console.log(o)}).finally(()=>{i(!1)}))};return n("div",{className:"panel",children:[e("div",{className:"panel-header",children:"Tax Rate"}),e("div",{className:"panel-body mt-2",children:n("div",{className:"flex justify-between items-center gap-2",children:[e("input",{value:t.taxRate,type:"text",className:"form-input",placeholder:"Tax Rate",onChange:r}),e("span",{children:"%"}),n("button",{className:"btn btn-primary",onClick:l,children:["Save ",s&&e(w,{})]})]})})]})};const P=m=>{const{company:t,setCompany:c}=m,s=d.useRef(null),[i,r]=d.useState(!1),[l,o]=d.useState(),h=()=>{s.current&&!i&&s.current.click()},g=u=>{var a;const p=(a=u.target.files)==null?void 0:a[0];p&&o(p)},y=async()=>{if(!l){console.error("No file selected");return}console.log("File uploaded successfully:",l),r(!0);const u=l,p=new FormData;p.append("logo",u);try{const a=await v.post("company/settings/logo",p,{headers:{"Content-Type":"multipart/form-data"}});N("Company Logo Updated"),console.log("File uploaded successfully:",a.data),c({...t,logo:a.data.newPath})}catch(a){C("Something went wrong, Please try again later"),console.error("Error uploading file:",a)}finally{r(!1),o(void 0)}};return d.useEffect(()=>{l&&y()},[l]),n("div",{className:"panel",children:[e("div",{className:"panel-header",children:"Company Logo"}),n("div",{className:"panel-body",children:[e("div",{className:"flex justify-center items-center",children:e("div",{className:"flex justify-center items-center w-3/4 py-4",children:i?e(x,{}):e("img",{src:t.logo??"/assets/images/file-preview.svg",alt:"company logo",className:"w-full"})})}),e("div",{className:"flex justify-center items-center mt-3",children:n("div",{className:"w-full",children:[e("button",{onClick:h,className:"btn btn-primary w-full",children:"Change Logo"}),e("input",{type:"file",ref:s,style:{display:"none"},onChange:g,accept:"image/*"})]})})]})]})},E=m=>{var h,g,y,u,p;const{company:t,setCompany:c}=m,[s,i]=d.useState(!1),r=(a,S)=>{c(f=>({...f,[a]:S}))},l=(a,S)=>{c(f=>({...f,address:{...f.address,[a]:S}}))},o=()=>{s||(i(!0),v.put("/company/settings/update-info",t).then(a=>{N("Company Info Updated")}).catch(a=>{console.log(a),C("Something went wrong, Please try again later")}).finally(()=>{i(!1)}))};return n("div",{className:"panel",children:[e("div",{className:"panel-header",children:"Company Info"}),n("div",{className:"panel-body",children:[n("div",{className:"mt-4",children:[e("label",{children:"Company Name"}),e("input",{value:t.name??"",type:"text",className:"form-input",placeholder:"Company Name",onChange:a=>r("name",a.target.value)})]}),n("div",{className:"mt-4",children:[e("label",{children:"Company Email"}),e("input",{value:t.email??"",type:"text",className:"form-input",placeholder:"Company Email",onChange:a=>r("email",a.target.value)})]}),n("div",{className:"mt-4",children:[e("label",{children:"Company Phone"}),e("input",{value:t.phone??"",type:"text",className:"form-input",placeholder:"Company Phone",onChange:a=>r("phone",a.target.value)})]}),n("div",{className:"mt-4",children:[e("label",{children:"Address line 1"}),e("input",{value:((h=t.address)==null?void 0:h.line1)??"",type:"text",className:"form-input",placeholder:"Address, street",onChange:a=>l("line1",a.target.value)})]}),n("div",{className:"mt-4",children:[e("label",{children:"Address line 2"}),e("input",{value:((g=t.address)==null?void 0:g.line2)??"",type:"text",className:"form-input",placeholder:"Apt, Suite",onChange:a=>l("line2",a.target.value)})]}),n("div",{className:"mt-4",children:[e("label",{children:"City"}),e("input",{value:((y=t.address)==null?void 0:y.city)??"",type:"text",className:"form-input",placeholder:"Company City",onChange:a=>l("city",a.target.value)})]}),n("div",{className:"mt-4 flex justify-between items-center gap-4",children:[n("div",{className:"",children:[e("label",{children:"State"}),e("input",{value:((u=t.address)==null?void 0:u.state)??"",type:"text",className:"form-input",placeholder:"Company State",onChange:a=>l("state",a.target.value)})]}),n("div",{className:"",children:[e("label",{children:"Zip"}),e("input",{value:((p=t.address)==null?void 0:p.zip)??"",type:"text",className:"form-input",placeholder:"Company Zip",onChange:a=>l("zip",a.target.value)})]})]}),e("div",{className:"mt-4",children:n("button",{className:"btn btn-primary w-full",onClick:()=>o(),children:["Update Company Info",s&&e(w,{})]})})]})]})},j=m=>{const{companySettings:t,setCompanySettings:c}=m;console.log(t);const[s,i]=d.useState(!1),r=()=>{i(!0),v.put("/company/settings",{reviewLink:t.reviewLink}).then(l=>{c({...t,reviewLink:t.reviewLink})}).catch(l=>{C("Something went wrong, Please try again later"),console.log(l)}).finally(()=>{N("Review Link Updated"),i(!1)})};return n("div",{className:"panel",children:[e("div",{className:"panel-header",children:"Add link for review"}),e("div",{className:"panel-body mt-2",children:n("div",{className:"flex items-center gap-2",children:[e("input",{type:"text",value:t.reviewLink,onChange:l=>c({...t,reviewLink:l.target.value}),className:"form-input w-3/4",placeholder:"Enter review link"}),e("button",{className:"btn btn-primary",onClick:r,children:s?e(b,{}):"Save"})]})})]})},A=()=>{const[m,t]=d.useState({}),[c,s]=d.useState({}),{loadingStatus:i,data:r,error:l,sendRequest:o}=L({url:"/company/settings",method:"get"});return d.useEffect(()=>{r&&(t(r.companySettings),s(r.company))},[r]),d.useEffect(()=>{o()},[]),n("div",{children:[e("div",{className:"flex justify-start items-center text-lg",children:e("h1",{children:"Company General Settings"})}),i==="loading"&&e(x,{}),i==="error"&&e(k,{}),i==="success"&&e("div",{className:"py-4",children:n("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[n("div",{className:"grid grid-rows-none gap-3",children:[e(P,{company:c,setCompany:s}),e(R,{companySettings:m,setCompanySettings:t}),e(j,{companySettings:m,setCompanySettings:t})]}),e("div",{className:"grid grid-rows-none gap-3",children:e(E,{company:c,setCompany:s})})]})})]})};export{A as default};
