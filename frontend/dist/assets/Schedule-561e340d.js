import{e as v,u as C,r as a,g as y,s as S,b as E,j as l,a as s,L,h as N,P as b,c as j}from"./index-8fdcf26f.js";import{A as k}from"./AppointmentsScheduler-f6f3342c.js";import"./moment-a9aaa855.js";const M=()=>{const f=v(),g=C(),[d,h]=a.useState([]),[p,u]=a.useState("week"),n=y(e=>e.themeConfig.theme);a.useEffect(()=>{f(S("Schedule"))});const[r,o]=a.useState("loading"),m=e=>{const x=t=>{console.log("getColors",n);let i=n==="dark"?"#ffffff29":"#ccc";i=t.status==0?t.bg:i;let c=t.status===0?"text-white":n==="dark"?"text-gray-300":"text-gray-500";return{bgColor:i,textColor:c}},w=e.map(t=>{const{bgColor:i,textColor:c}=x(t);return{id:t.id,title:t.title,start:t.start,end:t.end,status:t.status,bg:i,addClass:c}});h(w)};return a.useEffect(()=>{m(d)},[n]),a.useEffect(()=>{o("loading"),E.get("/appointment").then(e=>{m(e.data.appointments),o("success")}).catch(e=>{o("error"),console.log(e)})},[]),a.useEffect(()=>{const e=()=>{window.innerWidth<768?u("day"):u("week")};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}},[]),l("div",{children:[l("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[s("h2",{className:"text-xl",children:"Schedule"}),s("div",{className:"flex gap-2 md:justify-end justify-around mb-2",children:s("div",{className:"flex-auto md:flex-none ",children:l(L,{to:"/schedule/map",className:"flex items-center ",children:[s(N,{className:"mr-1"}),"Map View"]})})})]}),r==="loading"&&s(b,{}),r==="error"&&s(j,{}),r==="success"&&s("div",{className:"py-4",children:s(k,{appointments:d,onClickHandler:e=>{g("/appointment/"+e.id)},viewType:p,startTime:"07:00",endTime:"20:00"})})]})};export{M as default};
